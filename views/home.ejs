<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>URL Shortener</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container" role="main" aria-label="URL Shortener">
      <h1>URL Shortener</h1>
      <form method="POST" action="/URL" aria-describedby="url-desc">
        <label for="url-input"
          >Enter your Original URL<strong> : </strong></label
        >
        <input
          id="url-input"
          type="url"
          name="url"
          placeholder="https://example.com"
          required
          autocomplete="off"
          aria-required="true"
          aria-label="URL input field"
        />
        <button type="submit" aria-label="Generate short URL">Generate</button>
      </form>

      <% if(locals.id) { %>
      <p class="generated-url" role="alert" aria-live="polite">
        URL Generated:
        <a
          href="http://localhost:3001/URL/<%= id %>"
          target="_blank"
          rel="noopener noreferrer"
        >
          http://localhost:3001/URL/<%= id %>
        </a>
      </p>
      <% } %>
    </div>

    <div class="table-container">
      <% if(locals.urls){ %>
      <table aria-label="Generated URLs table" role="table">
        <thead role="rowgroup">
          <tr role="row">
            <th scope="col">S.No</th>
            <th scope="col">ShortID</th>
            <th scope="col">Redirect</th>
            <th scope="col">Clicks</th>
          </tr>
        </thead>
        <tbody role="rowgroup">
          <% urls.forEach((url,ind)=> { %>
          <tr role="row">
            <td role="cell" data-label="S.No"><%= ind + 1 %></td>
            <td role="cell" data-label="ShortID"><%= url.shortId %></td>
            <td role="cell" data-label="Redirect"><%= url.redirectURL %></td>
            <td role="cell" data-label="Clicks">
              <%= url.visitHistory.length %>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <% } %>
    </div>

    <footer>
      <p>Made with ðŸ’—ðŸ’—ðŸ’— by Mohammad Ali Zilani</p>
    </footer>
  </body>
</html>
